<macros>
    <token name="@TOOL_VERSION@">1.1.4</token>
    <token name="@VERSION_SUFFIX@">1</token>
    <xml name="requirements">
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">cialign</requirement>
    </requirements>
    </xml>

    <xml name="tests"> 
    <tests>
        <!-- Test 1 (Basic) -->
        <test expect_num_outputs="3">
            <param name="input" value="example1.fasta"/>
        </test>
        <!-- Test 2 config file -->
        <test expect_num_outputs="3">
            <param name="input" value="example1.fasta"/>
            <param name="inifile" value="ini_template.ini"/>
        </test>
        <!-- Test 3 config file -->
        <test expect_num_outputs="5">
            <param name="input" value="example1.fasta"/>
            <param name="all" value="--all"/>
            <param name="plot_input" value="true"/>
            <param name="plot_output" value="true"/>
        </test>
        <!-- Test 4 Remove Divergent Conditional -->
        <test expect_num_outputs="3">
            <param name="input" value="example1.fasta"/>
            <conditional name="remove_divergent_cond">
                <param name="remove_divergent_param" value="true"/>
                <param name="remove_divergent_str" value="Seq7"/>
            </conditional>
            <conditional name="retain_cond">
                <param name="retain_param" value="true"/>
                <param name="retain" value="Seq7"/>
            </conditional>
        </test>
        <!-- Test 5 Remove Insertions Conditional -->
        <test expect_num_outputs="3">
            <param name="input" value="example1.fasta"/>
            <conditional name="remove_insertions_cond">
                <param name="remove_insertions_param" value="true"/>
            </conditional>
            <conditional name="remove_short_cond">
                <param name="remove_short_param" value="true"/>
            </conditional>
            <conditional name="crop_divergent_cond">
                <param name="crop_divergent_param" value="true"/>
            </conditional>
        </test>
    </tests>
    </xml>
    <xml name="help">
    <help><![CDATA[
What this tool does
===================

CIAlign is designed to clean, interpret, and visualize multiple sequence alignments (MSAs). 
It helps identify and remove problematic regions such as insertions, poorly aligned ends, and overly gappy sequences. This improves downstream analyses like phylogenetic inference and comparative genomics.

It also offers tools to generate customizable visualizations, allowing users to inspect alignments and cleaning steps through compact and informative plots.

Input
=====

CIAlign takes standard multiple sequence alignment files in FASTA format. It also supports optional configuration via a config file to tailor cleaning and visualization steps to specific needs.

Output
======

CIAlign produces a cleaned alignment in FASTA format along with optional log files, summary statistics, and visualization plots.

    ]]></help>
    </xml>
</macros>